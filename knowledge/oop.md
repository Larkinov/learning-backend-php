# Паттерны ООП

## PHP

### Lazy Loading

Применение и принцип работы:

- Паттерн применяется тогда, когда загрузка данных необходима только после применения некоторых действий или триггеров, а не вместе с инициализацией основных скриптов. После загрузки данные сохраняются в переменной и выдаются по мере необходимости. Например: когда открывается страница интернет-магазина, загружаются лишь те данные, которые находятся на экране устройства (или чуть ниже), а не все данные сразу. Или когда сохраняется роль пользователя и затем эта роль выдается в тех местах где она нужна, а не загружается каждый раз.
- Принцип работы: данные загружаются в определенной функции, а не при инициализации объекта класса, то есть их загрузка начинается тогда, когда это необходимо. Результат сохраняется внутри класса/функции.

В виде класса

```php
class Roles
{
static $roles;

    public static function roles()
    {
        if (null !== static::$roles) {
            /** здесь как-то загружаются $roles из БД ... */
            static::$roles = $roles;
        }
        return static::$roles;
    }

    public static function isAdmin()
    {
        return in_array('admin', static::roles());
    }

}
```

В виде функции

```php
//функция возвращающая роли юзера
function roles()
{
    static $roles;
    if (null !== $roles) {
        /\*_ здесь как-то загружаются $roles из БД ... _/
    }
    return $roles;
}
```
